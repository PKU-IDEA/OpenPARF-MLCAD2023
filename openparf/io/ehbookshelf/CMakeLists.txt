# -----
# @file          : CMakeLists.txt
# @project       : ehbookshelf
# @author        : Jing Mai <jingmai@pku.edu.cn>
# @created date  : June 29 2023, 22:57:38, Thursday
# @brief         :
# -----
# Last Modified: June 30 2023, 00:00:28, Friday
# Modified By: Jing Mai <jingmai@pku.edu.cn>
# -----
# @history :
# ====================================================================================
# Date         	By     	(version)	Comments
# -------------	-------	---------	--------------------------------------------------
# ====================================================================================
# Copyright (c) 2020 - 2023 All Right Reserved, PKU-IDEA Group
# -----
# This header is generated by VSCode extension psi-header.
#

include_directories(
    ${PROJECT_SOURCE_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${CMAKE_CURRENT_BINARY_DIR}
    ${FLEX_INCLUDE_DIRS}
    )

BISON_TARGET(EHBookshelfParser
  ${CMAKE_CURRENT_SOURCE_DIR}/ehbookshelf_parser.yy
  ${CMAKE_CURRENT_BINARY_DIR}/ehbookshelf_parser.cpp
  DEFINES_FILE ${CMAKE_CURRENT_BINARY_DIR}/ehbookshelf_parser.h
  )
FLEX_TARGET(EHBookshelfLexer
  ${CMAKE_CURRENT_SOURCE_DIR}/ehbookshelf_scanner.ll
  ${CMAKE_CURRENT_BINARY_DIR}/ehbookshelf_scanner.cpp)
ADD_FLEX_BISON_DEPENDENCY(EHBookshelfLexer EHBookshelfParser)

file(GLOB SOURCES
    ehbookshelf_driver.cpp
    )
add_library(ehbookshelf STATIC ${SOURCES} ${BISON_EHBookshelfParser_OUTPUTS} ${FLEX_EHBookshelfLexer_OUTPUTS})
target_include_directories(ehbookshelf PUBLIC ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR})
set_target_properties(ehbookshelf PROPERTIES POSITION_INDEPENDENT_CODE TRUE)
if(CMAKE_BUILD_TYPE STREQUAL "DEBUG")
    target_compile_definitions(ehbookshelf PRIVATE DEBUG_EHBOOKSHELFPARSER)
endif()
